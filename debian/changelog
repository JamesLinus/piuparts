piuparts (0.36) UNRELEASED; urgency=low

  * piuparts.py:
    - add check whether scriptsdir exits, to fail gracefully if not. 
    - copy scriptsdir to chroot also when doing upgrade tests.
    - ignore modifications of /var/lib/dpkg/triggers/*
    - ignore modifications of /etc/shadow* as /etc/passwd* and /etc/group* are
      ignored too.
    - ignore if /var/games exists after purge (see #524461).
    - configure apt in chroots to not install recommends and suggests.
    - add support for scanning for packages in changes files, thanks to Andres
      Mejia for the patch. (Closes: #352940)
    - change some methods from using 'args' to 'package_list'. This more 
      accurately represents what is being passed into these methods now. 
    - add an optional parameter to panic() method to specify what exit status
      to use. Also thanks to Andres.
    - add advice how to read the logfile to the top of the logfiles produced.
    - add "FAIL: " to logging output for seven more failure types, so that it
      becomes easier to group failure causes.
  * piupartslib/packagesdb.py:
    - change the test whether a package is testable to check whether the 
      package is of priority "required", and not whether it's "Essential".
    - rename status "essential-required-important" to "essential-required" 
      as important packages can be tested like all the others.
  * Install scripts for master-slave mode without .py extension.
  * piuparts-master.py: remove code to write statistics, that is done only in 
    piuparts-report.py now.
  * piuparts-slave.py:
    - support looping trough multiple sections in slave.conf via new config 
      value "sections". Thanks to Frank Ploss for writing this patch with me 
      and helping me understand the code much better!
  * Re-add piuparts-reports.py which got removed/lost between 0.14 and 0.20 
    without changelog entry.
  * piuparts-reports.py: 
    - support sections in configuration file. 
    - support looping trough multiple sections in report.conf via new config
      value "sections". 
    - generate counts.txt (per section) with raw numbers of packages per state,
      include these stats in the debug output (so it gets included in the mails
      send by cron.)
    - introduce new setting "sources-url" for piuparts.conf.
    - generate sources.txt (per section) with a summary status per source
      package (for the PTS to display a source packages piuparts state)
    - generate html status pages for all source packages (to link from the PTS)
    - provide links to logfiles in statistics page.
    - provide links to source packages pages from state pages and back.
    - improve layout, generate navigation for all pages.
  * Break backwards compatibility of the configuration files for master-slave-
    mode. Merge those three into one: /etc/piuparts/piuparts/piuparts.conf.
    Introduce a new global section in piuparts.conf which is shared among the
    other sections there.
  * Always use alphabetic time zone abbreviation in timestamps.
  * Makefile: 
    - add "~$date" to versionstring if building an unreleased version, thus
      adding dpkg-dev to build-depends.
    - split install target into install-doc, install-conf and install, to aid
      development and deployment from trunk.
  * debian/control: 
    - depend on python (>>2.4), make dependency to python-debian unversioned
    - add build-dependencies on debhelper, asciidoc and xmlto.
    - remove build-dependencies on docbook2x and docbook-xml.
    - set Homepage: to http://piuparts.debian.org
    - bump Standards-Version to 3.8.1, no changes neccessary.
  * Rewrite debian/rules from scratch using debhelper.
  * Merge README, how-to-use-piuparts.txt and custom-scripts.txt into 
    README.txt, convert it to asciidoc and build pdf and html versions of it. 
  * Restructure and update README.txt to reflect the configuration changes in 
    master-slave mode.
  * Add NEWS file.
  * Rewrite piuparts manpage in asciidoc.
  * Build and install html version of the piuparts manpage.
  * Update debian/copyright to reflect that piuparts is licenced under GPL2+.
  * Update FSF address in all files referencing the GPL.
  * Remove unused file piuparts.css. 

 -- Holger Levsen <holger@debian.org>  Tue, 10 Mar 2009 15:23:59 +0100

piuparts (0.35) unstable; urgency=medium

  * Fix recursive failure which occured when selinux-utils was installed but
    not enabled. Thanks to Peter De Wachter for the patch. (Closes: #519017)
  * Output path to temp directory if -k is used. (Closes: #466112)

 -- Holger Levsen <holger@debian.org>  Tue, 10 Mar 2009 00:43:22 +0100

piuparts (0.34) unstable; urgency=low

  [ Holger Levsen ]
  * Mount /selinux on systems where selinux is enabled. Thanks to Filippo
    Giunchedi for the patch! (CLoses: 507171)
  * Remove wrong advice in debian/copyright which irritated lintian.

  [ Filippo Giunchedi ]
  * Check for any output when running cron files in addition to exit code

 -- Holger Levsen <holger@debian.org>  Fri, 27 Feb 2009 12:34:31 +0100

piuparts (0.33) unstable; urgency=low

  * Added --bindmount option, thanks to An√≠bal Monsalve Salaza for the patch. 
    (Closes: #496186)

 -- Holger Levsen <holger@debian.org>  Sat, 08 Nov 2008 17:07:22 +0000

piuparts (0.32) unstable; urgency=low

  [ John Wright ]
  * Fix a typo in how-to-use-piuparts.txt.

  [ Holger Levsen ]
  * Replace all references to sarge and etch with etch and lenny. 
    (Closes: #466111)
  * Update README to reflect that piuparts runs fine in etch. 
  * Rename the post_upgrade custom script to post_distupgrade and introduce
    pre_distupgrade.
  * Bumped standards version, no changes needed.

 -- Holger Levsen <holger@debian.org>  Fri, 17 Oct 2008 10:28:14 +0000

piuparts (0.31) unstable; urgency=low

  [ Lars Wirzenius ]
  * piuparts.docbook: Added a few words of description of the tarball
    that -b expects. (Closes: 466048)

  [ Lucas Nussbaum ]
  * Added a --debfoster-options option, to allow the user to override
    debfoster's default options and test with more packages installed
    in the chroot. (Closes: #458922)
  * Mention piuparts -s in in how-to-use-piuparts.txt.
  * Finally fixes the check for broken symlinks. Thanks go to
    Tobias Grimm for the patch. (Closes: #468157, 478587)
  * Ignore /var/cache/ldconfig/aux-cache.
  * Added myself to uploaders.
  * Keep /proc mounted. Switch to calling tar directly in
    pack_into_tgz(). Minor refactorings. Thanks go to Tobias Grimm
    for the patch. (Closes: #478577)
  * Move piuparts to priority: extra, since it depends on debootstrap which
    is extra. (Closes: #477634)

  [ Luk Claes ]
  * Added -w to lsof call to suppress warnings. (Closes: #466102).

  [ Holger Levsen ]
  * Add a copyright statement to debian/copyright.
  * Add support for post_upgrade custom script.
  * Minor fixes in how-to-use-piuparts.txt.
  * piuparts.docbook: Correct the path to dtd, it's
    /usr/share/xml/docbook/schema/dtd/4.1.2/docbookx.dtd and add a
    build-dependency for docbook-xml

 -- Holger Levsen <holger@debian.org>  Sun, 11 May 2008 22:17:52 +0200

piuparts (0.30) unstable; urgency=low

  * piuparts.py:
    - Implement Chroot.create_temp_tgz_file() (since it's used in the VirtServ
      subclass)
    - Fix a typo -- chroot.create_temp_tgz() was being called instead of
      chroot.create_temp_tgz_file() (Closes: #465416)

 -- John Wright <jsw@debian.org>  Thu, 14 Feb 2008 20:32:35 -0700

piuparts (0.29) unstable; urgency=low

  [ Ana Beatriz Guerrero Lopez ]
  * Updated uploaders, remove Amaya and Alastair.

  [ Lars Wirzenius ]
  * piuparts.py: Call "apt-get update" before calling Chroot.minimize, so
    that we can find the debfoster package on Ubuntu.
  * debian/control: Fixed "Uploaders:" to have my preferred e-mail address
    (liw@iki.fi) instead of my Debian one.
  * piuparts.py: Added -D option to set Debian flavor, plus two sets of
    default settings depending on the flavor, one for Debian itself, and
    another for Ubuntu. The settings choose default mirror and distribution
    set (sid vs gutsy). This will allow an Ubuntu version of the package
    to set defaults at package building time.
  * piuparts.py: Report target of broken symlink correctly, instead of
    saying "True".
  * piuparts.py: Use lsb-release to guess the Debian flavor.
  * debian/control: Added dependency on lsb-release.
  * piuparts-master.py: Make the master write summary of total pass/fail
    packages, plus status per binary package. This is for having the
    Debian PTS and the Ubuntu developer weather report show summaries
    of piuparts results.
  * integraged changes from Ubuntu by Ian Jackson to support autopkgtest.
  * wrapped long lines in debian/control.

  [ Holger Levsen ]
  * Added myself to uploaders.
  * Added Homepage: header to debian/control and changed the homepage to be
    http://wiki.debian.org/piuparts.
  * Use Vcs-* headers in debian/control instead of XS-Vcs-*.
  * Bumped policy version to 3.7.3.
  * Updated download location in debian/copyright.

  [ John Wright ]
  * Change the --warn-on-others implementation to create a dummy metapackage
    with the needed dependencies and install it in the chroot, rather than
    using "apt-get install package package-".  The previous implementation
    had issues when the package was already installed (and especially if the
    package had essential packages in its reverse dependencies).  This has
    the pleasant side-effect of making --warn-on-others work both with and
    without --apt. (Closes: #458929)
  * Fix a bug in check_for_broken_symlinks(): the targets for the broken
    symlinks (used for logging) were being read from files on the real root
    filesystem, rather than in the chroot.

 -- Lars Wirzenius <liw@iki.fi>  Fri, 01 Feb 2008 16:38:38 +0200

piuparts (0.28) unstable; urgency=low

  * Fix an UnboundLocalError introduced in the --warn-on-others fix that would
    occur if run without the --apt option. (Closes: #443641)

 -- John Wright <jsw@debian.org>  Sat, 22 Sep 2007 23:32:17 -0600

piuparts (0.27) unstable; urgency=low

  * Add support for testing multiple distributions and architectures to
    piuparts-master.py and piuparts-slave.py.  Please see the README file,
    piuparts-master.conf.sample and piuparts-slave.conf.sample for more
    details. (Closes: #349365)
  * Fix the --warn-on-others option.  Now, dependencies are installed before
    the packages we wish to test, and an inventory is taken then, so that we
    can know which errors were caused by the packages explicitly specified on
    the command-line.  Currently, this requires --apt, and doesn't work quite
    as advertised if there are circular dependencies with the packages you wish
    to test (see the man page for more details). (Closes: #440310)
  * debian/control:
    - Update my email address in the Uploaders field

 -- John Wright <jsw@debian.org>  Sun, 16 Sep 2007 22:28:14 -0600

piuparts (0.26) unstable; urgency=low

  * Update list of ignored files. (Closes: #439592)
  * In the cron test, not executable files are not run. (Closes: #440141)

 -- Ana Beatriz Guerrero Lopez <ana@debian.org>  Fri, 31 Aug 2007 15:44:36 +0200

piuparts (0.25) unstable; urgency=low

  * Add the option to run custom scripts inside the piuparts chroot.
    Scripts are stored in a directory and give it as argument with the
    option --scriptsdir=/dir/with/the/scripts
    This feature is still experimental :)
  * Add custom-scripts.txt with information about the custom scripts.

 -- Ana Beatriz Guerrero Lopez <ana@debian.org>  Tue, 28 Aug 2007 14:39:32 +0200

piuparts (0.24) unstable; urgency=low

  * Add /var/lib/apt/extended_states to ignored_files. Thanks Anibal!
   (Closes: #434980)
  * Add quick howto about how to use piuparts under docs.
  * Add test that checks the output from the cron files left in the system
    after removing a package. This includes the option --skip-cronfiles-test,
    to allow skipping this test.

 -- Ana Beatriz Guerrero Lopez <ana@debian.org>  Mon, 20 Aug 2007 10:27:29 +0200

piuparts (0.23) unstable; urgency=low

  * Cosmetic change, now file owner and file are shown in the same line.
  * Add option --list-installed-files, that list files added/removed/modified 
    to the chroot after the package's installation.  (Closes: #431821)
  * Add option --no-upgrade-test, that allows skip testing upgrade from an 
    existing version in the archive. (Closes: #349933)

 -- Ana Beatriz Guerrero Lopez <ana@debian.org>  Tue, 10 Jul 2007 19:47:21 +0200

piuparts (0.22) unstable; urgency=low

  [ John Wright ]
  * debian/control:
    - Add XS-Vcs-Svn and XS-Vcs-Browser fields

  [ Ana Beatriz Guerrero Lopez ]
  * Rename piuparts.py.in back to piuparts.py.
  * Add option --skip-minimize that allows skip the minimize chroot step 
    with debfoster.
  * Remove m4 substitution, and use sed instead. Drop Build-Depends on m4. 
    (Closes: #431248)
  * Drop support for python 2.3 and add support for python 2.5.
  * debian/rules:
    - Remove execution of checkversion in package build, not longer needed.
  * debian/control:
    - Add myself to uploaders.
    - Add (future) piuparts website.

 -- Ana Beatriz Guerrero Lopez <ana@debian.org>  Wed, 04 Jul 2007 21:03:44 +0200

piuparts (0.21) unstable; urgency=low

  * Convert to Debian-native packaging style.  From now on, changes to piuparts
    will be tracked here.  (Closes: #389610)
  * Makefile:
    - Give docbook2x-man a --encoding=utf-8 argument.  It was failing to build.
    - Generate piuparts.py from piuparts.py.in, filling in the VERSION variable
      with the version from debian/changelog
  * debian/control:
    - Fix the name of the maintainer (we're the "piuparts developers team", not
      Lustre)
    - Correct my email address in the uploaders field
    - Add Build-Depends on m4
  * piuparts.py.in:
    - Don't call shellquote() on arguments, since we're not using the shell.
      (Closes: #386839)
    - Add a --warn-on-others option.  See the man page for details.
  * piuparts.docbook:
    - Document the --warn-on-others option.

 -- John Wright <john@movingsucks.org>  Thu, 21 Jun 2007 00:27:22 +0100

piuparts (0.20-3) unstable; urgency=low

  * New Maintainer(s): piuparts team. Closes: #390754.

 -- Alastair McKinstry <mckinstry@debian.org>  Mon, 23 Oct 2006 16:02:19 +0100

piuparts (0.20-2) unstable; urgency=low

  * Orphaning.

 -- Lars Wirzenius <liw@iki.fi>  Mon,  2 Oct 2006 23:43:00 +0300

piuparts (0.20-1) unstable; urgency=low

  * New upstream version. Fixed Debian bugs:
    - Symlink correctness checking was broken when symlinks pointed at
      symlinks. (Closes: #387796)
    - fails if a deb filename contains a "strange" char. (Closes: #386839)

 -- Lars Wirzenius <liw@iki.fi>  Fri, 22 Sep 2006 12:58:24 +0300

piuparts (0.19-1) unstable; urgency=low

  * New upstream version. No Debian bugs fixed.

 -- Lars Wirzenius <liw@iki.fi>  Fri,  8 Sep 2006 20:28:31 +0300

piuparts (0.18-1) unstable; urgency=low

  * New upstream version. No Debian bugs fixed.
  * debian/control: Updated for new Python policy.
  * debian/prerm, debian/postrm: Written. They compile/remove byte code 
    files.

 -- Lars Wirzenius <liw@iki.fi>  Thu,  7 Sep 2006 20:42:03 +0300

piuparts (0.17-1) unstable; urgency=low

  * debian/control: Added dependency on lsof, since that is now used to
    check that there are no processes running inside the chroot.
  * New upstream version, fixes the following open bugs in Debian:
    - missing words in piuparts(1) (Closes: 362551)
    - default ignore pattern for papercut files added (Closes: #355401)

 -- Lars Wirzenius <liw@iki.fi>  Sun, 25 Jun 2006 19:35:19 +0300

piuparts (0.16-1) unstable; urgency=low

  * New upstream version. Fixes the following bugs reported against the 
    Debian package:
    - TODO: keep track of bugs to show expected failures and unexpected
      successes (Closes: #353215)
    - It would be nice if the chroot were updated before the snapshot
      (Closes: #356678)
  * debian/control: Made the dependency on debootstrap be versioned.
    Closes: #355875.

 -- Lars Wirzenius <liw@iki.fi>  Fri, 22 Mar 2006 22:40:00 +0200

piuparts (0.15-1) unstable; urgency=low

  * New upstream version. Includes fixes for Debian bugs:
    - "Specify packages to use for testing" (Closes: #354811)
    - "Misleading documentation of -v" (Closes: #352941)

 -- Lars Wirzenius <liw@iki.fi>  Wed, 01 Mar 2006 20:53:00 +0200

piuparts (0.14-1) unstable; urgency=low

  * New upstream version. Includes fix for:
    - "piuparts should flag as an error a failed installation of a dependency"
      (Closes: #343324)

 -- Lars Wirzenius <liw@iki.fi>  Sun, 18 Dec 2005 23:22:00 +0200

piuparts (0.13-1) unstable; urgency=low

  * New upstream version.
  * debian/changelog: Minor tweaking to the description.

 -- Lars Wirzenius <liw@iki.fi>  Sat, 12 Nov 2005 00:53:04 +0200

piuparts (0.12-1) unstable; urgency=low

  * New upstream version. Fixes bug in Debian:
    - dist-upgrade to experimental does not work (now documented as a 
      feature). Closes: #330749.

 -- Lars Wirzenius <liw@iki.fi>  Mon, 17 Oct 2005 21:03:12 +0300

piuparts (0.11-1) unstable; urgency=low

  * New upstream version. Fixes bugs in Debian:
    - Checks whether there are packages on the command line before creating
      a chroot. Closes: #322441.
    - apt-get configured to allow unauthenticated repositories. 
      Closes: #326705.

 -- Lars Wirzenius <liw@iki.fi>  Fri, 14 Oct 2005 01:16:25 +0300

piuparts (0.10-1) unstable; urgency=low

  * New upstream version.

 -- Lars Wirzenius <liw@iki.fi>  Thu, 15 Sep 2005 23:31:30 +0300

piuparts (0.9-1) unstable; urgency=low

  * New upstream version, fixes bugs reported against Debian:
    - Upstream version number in Debian package and in upstream sources
      now match. Closes: #326058.
    - Files reported by piuparts are now associated with their packages,
      when possible. Closes: #324248.
  * debian/rules: Added "checkversion" target to make sure we no longer
    do stupid things like #326058, at least in the Debian package.

 -- Lars Wirzenius <liw@iki.fi>  Fri, 09 Sep 2005 00:34:36 +0300

piuparts (0.8-1) unstable; urgency=low

  * New upstream version, fixes bugs:
    - Example in manual page now works (Closes: #319990)
    - Temporary directories are now removed on failure (Closes: #323653)
    - Parsing /etc/apt/sources.list now better (Closes: #319989)
    - Temporary directorys are now put in $TMPDIR or /etc (Closes: #322440)
  * debian/control: Added build-depends on docbook2x. Closes: #318693
  * debian/changelog: Added note about upstream source repository.

 -- Lars Wirzenius <liw@iki.fi>  Mon, 29 Aug 2005 23:03:32 +0300

piuparts (0.7-1) unstable; urgency=low

  * New upstream version.
  * This is the first package that will be uploaded to the Debian archive.

 -- Lars Wirzenius <liw@iki.fi>  Fri, 15 Jul 2005 13:09:00 +0300

piuparts (0.6-1) unstable; urgency=low

  * First release of the Debian package.

 -- Lars Wirzenius <liw@iki.fi>  Tue,  5 Jul 2005 20:08:00 +0300
