Things to do for piuparts
=========================

Please also check the BTS, especially the bugs with a severity
higher than wishlist!

for 0.42:

- share templates for filing bugs

- piuparts-report should keep state, ie cache the results of the log 
  analysis and generated html pages. Thus, a piuparts-report run could
  take minutes instead of hours... this is now (with four distros tested 
  instead of three) more needed than ever.

- use python-debianbts to track bugginess status of packages via
  the bts and remove the "bugged" directory-status tracking
  altogether.  also remove "fixed".

- discard logs for packages which have been removed from distro.

- piuparts-report.py: fix those 2 FIXMEs in main()

- warn/remove about files in */reserved older than 24h

- merge script from my svn working copy: home/piupartsm/bin/biggest_blocker.sh 
  with a similar one Dave send to the list

- store and load the diversion information with --save-end-meta and --end-meta


for 0.43:

- provide mail templates for bugreports (which ideally only
  should need manual logfile trimming) at
  http://$piuparts/$distro/fail/$packages_$version.bug for usage 
  by a then to be written tool.

- write reportbug(-like) wrapper for mass bug filing (start
  simple, make it more sophisticated later). 

- use libeatmydata - either install it in all chroots or find a
  better way to use it. Since 0.41 there is --force-unsafe-io 
  but libeatmydata should be even faster.

- generate piuparts.1.txt automatically from piuparts.py - see
  this blog post for a nice howto:
  http://andialbrecht.wordpress.com/2009/03/17/creating-a-man-page-with-distutils-and-optparse/

- sometimes a chroot doesn't get removed on piatti - find out
  why and fix it.

- Adjust report scripts to detect this condition;
          text in log="*** Process KILLED - exceed maximum run time ***"


for 0.44:

- mv piatti.git piuparts.git/doc/examples  and include it into a new
  binary package.  when doing so keep in mind the two tango icons
  and credit those in debian/copyright.

- create piuparts-master and piuparts-slave packages.

- publish FAI classes to setup piuparts.$fqdn automatically.


for 0.45:

- remove configfile option "mirror" and use the mirror from
  "packages-url".

- find_default_debian_mirrors: if parts[2] contains a / (think
  stable/updates for security.d.o), you can't ignore this, it
  will break later...

- support for extra-packages-url (for backports, security, etc)

- make it possible to call aptitude (or similar) instead of
  apt-get and allow to override the commandline arguments of the
  used program (to be able to test with and without recommended
  packages or authentication).

- piuparts-slave: timestamps to log messages

- master:
  - write stats about number of daily tests (-> report: create
    fancy graphs)


for 0.46:

- slave_run: cleanup stale proc mountpoints

- mounting /proc and perhaps others (usbfs, sysfs, /dev/pts,
  etc.) in the chroot might be a good idea because some packages
  might need this.  

- the templates used by update-reports.py should be taken from
  /etc/piuparts/templates/ and not be included in the python
  source


for 0.47 and later:

- report:
  - write stats about the reasons for failures, as its done with
    shell scripts now (piuparts-analyze.py is an existing
    "fragment".)
  - RSS feeds of logs
  - do more fancy R graphs, eg. also per state
  - sort packages on maintainer pages alphabetically
  - link (and target) to piuparts.d.o configuration is static to
    piatti. should refer to the actual hosts configuration, eg
    goldwassers

- a redirect of http://piuparts.d.o/foo to
  http://p.d.o/source/f/foo.html would be nice

- monitor: master.log grows to fast and there is no mechanism to stop it
  - use logrotate


for 0.50 and later:

- really support multiple architectures:
  - piuparts-report should have a list of available arch and list
    packages only available on untested archs in a new state
    "(depends-)not-available-on-tested-archs"
  - master should (per default) only schedule packages which are
    not available on the master arch to slaves of different archs
  -> "schedule-evenly-to-slaves = no"

- piuparts-master: keep track of to whom a reservation was given

- piuparts can't currently test upgrades of required packages.
  (Because they cannot be removed, it assumes these are
  untestable, which is only true for removal tests...

- not sure if it's a sensible thing to to, but provide a way to
  turn off debugging output for piuparts.py - see
  http://docs.python.org/library/logging.html

- commandline-switches for all programms 

- move shell cronjobs functionality into master, slave & report


Low priority stuff (a.k.a. "nobody's said they must have it now")
-----------------------------------------------------------------

- create archive of broken packages to provide test cases for 
  piuparts testing.

- create emacspeak-broken-dpkg-preconfigure package for broken
  repo. (then later put more broken packages in there and use
  that for testing piuparts)
